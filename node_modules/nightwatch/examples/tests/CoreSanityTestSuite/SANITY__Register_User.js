/* jshint expr: true */
module.exports = {
  tags: ['Core Front End'],
  before: function (browser) {
	  browser.windowMaximize('current');
  },
  'SANITY__Register_User' : function (sanity) {
    sanity
    .url('http://corepreview:previewphase@core-cms.si.aop.cambridge.org/core/')
	//.url('http://core-cms.pen.aop.cambridge.org/core/')
      .pause(1000);
    sanity.waitForElementVisible('body',20000);
	sanity.element('xpath', "//a[@class='cookie-close']", function(result){
	if (result.status !=-1)
			sanity.useXpath().click("*//a[@class='cookie-close']").pause(5000);
	}), 
	sanity.element('xpath', "//a[@class='browser-message-close']", function(result){		
	if (result.status !=-1)
			sanity.useXpath().click("*//a[@class='browser-message-close']").pause(5000);	
	}), 	
   	sanity.useXpath().click("*//ul[2]/li[3]/a[contains(.,'Register')]").pause(5000);
	
	sanity.useCss().setValue('#firstName', 'Nightwatcher').pause(500);
	sanity.useCss().setValue('#lastName', 'Nightwatcher').pause(500);
	sanity.useCss().setValue('#emailAddress', 'Nightwatcher@mail.com').pause(500);
	//sanity.useXpath().setValue("*//div[@id='countrycode']", 'Albania').pause(5000);
	sanity.useXpath().click("*//option[contains(.,'Albania')]").pause(5000);
	sanity.useCss().setValue('#institution', 'NewOrganisation').pause(500);
	sanity.useCss().setValue('#password', 'Password1').pause(500);
	sanity.useCss().setValue('#confirmPassword', 'Password1').pause(500);
	//sanity.useXpath().click("*//*[@id='maincontent']/div/div/div/div/div[2]/div/form/div[2]/div/label").pause(5000);
	//sanity.useXpath().click("*//div[contains(@class,'recaptcha-checkbox-checkmark firepath-matching-node')]").pause(5000);
	//sanity.useXpath().click("*//button[@type='submit']").pause(5000);
	//sanity.useXpath().expect.element("*//div[@class='alert'][contains(.,'Thank you for creating an account with Cambridge Core.')]").to.be.visible;
	sanity.end();
  },
  after:function(browser) {
	  browser.end();
  }
};
