/* jshint expr: true */
module.exports = {
  tags: ['IDM-Admin QA'],
  'AdminSanitySociety(QA)' : function (society) {
    society
      .url('http://idm-admin.qa.aop.cambridge.org')
      .pause(1000);
	//var d = (new Date).toISOString().replace(/z|t/gi,'_').trim().replace(":",null);
    var d = (new Date).toISOString().replace(/z|t/gi,'_').trim();
	var socname;
	//var d = Date.now();
    society.waitForElementVisible('body',20000);
   
    society.useCss().expect.element('html body div div form h4').text.to.match(/Cambridge Core Admin/).before(1000);
	society.useCss().expect.element('#username').to.be.enabled;
    society.useCss().expect.element('#password').to.be.enabled; 
	society.useCss().expect.element('#btn-login').to.be.enabled; 
	
    society.useCss().setValue('#username', 'cambridgecoreadmin@cambridge.org').pause(500);
	society.useCss().setValue('#password', 'C0r3@dm1n').pause(500);
	society.useCss().click('#btn-login').pause(5000);
	society.useCss().expect.element('a').to.have.attribute('class').which.contains('item');	
	society.useXpath().click("*//i[@class='align justify icon']").pause(5000);
	society.useXpath().click("*//div[@id='modules-menu']/div[contains(.,'Identities')]").pause(5000);
	society.useXpath().click("*//div[@id='modules-menu']/div[3]/div/div[6]/span[contains(.,'Societies')]").pause(5000);
	society.useXpath().click("*//a[contains(.,'Create Society')]").pause(5000);
	
	society.useCss().setValue('#acronym', d+'NewSocietyAcronym').pause(500);
	socname = d+'NewSociety';
	society.useCss().setValue('#name', socname).pause(500);
	
	society.useCss().setValue('#address-1', '#14344 Gen. Tinio St. Bangkal').pause(500);
	society.useCss().setValue('#town-city', 'Makati City').pause(500);
	society.useXpath().setValue("*//div[@id='country']//input[@class='search']", 'Albania').pause(5000);
	society.useXpath().click("*//div[@data-value='ALB']").pause(5000);
	society.useCss().setValue('#zip-code', '12345').pause(500);
	society.useXpath().click("*//button[contains(.,'Create')]").pause(5000);
	society.useXpath().expect.element("*//span[contains(.,'Society created successfully!')]").text.to.match(/Society created successfully!/).before(1000);
			
	society.useXpath().click("*//i[@class='align justify icon']").pause(5000);
	society.useXpath().click("*//div[@id='modules-menu']/div[contains(.,'Identities')]").pause(5000);
	society.useXpath().click("*//div[@id='modules-menu']/div[3]/div/div[6]/span[contains(.,'Societies')]").pause(5000);
	
	society.useXpath().setValue("*//input[@placeholder='By reference number, acronym, name or display name']", socname).pause(2000);
	society.useXpath().click("*//span[contains(.,'View')]").pause(5000);
	
	society.useXpath().expect.element("*//span[contains(.,'ENABLED')]").to.be.visible;
	society.useXpath().expect.element("*//td[contains(.,'newsocietyacronym')]").to.be.visible;
	society.useXpath().expect.element("*//td[contains(.,'NewSociety')]").to.be.visible;
	society.useXpath().expect.element("*//td[contains(.,'#14344 Gen. Tinio St. Bangkal')]").to.be.visible;
	society.useXpath().expect.element("*//td[contains(.,'Makati City')]").to.be.visible;
	society.useXpath().expect.element("*//td[contains(.,'Albania')]").to.be.visible;
	society.useXpath().expect.element("*//td[contains(.,'12345')]").to.be.visible;
	
	society.useXpath().click("*//button[@button='editButton']").pause(5000);
	society.useCss().setValue('#acronym', 'Edit').pause(500);
	society.useCss().setValue('#name', 'Edit').pause(500);
	society.useXpath().click("*//button[contains(.,'Update')]").pause(5000);
	society.useXpath().expect.element("*//span[contains(.,'Society updated successfully!')]").text.to.match(/Society updated successfully!/).before(1000);

	society.useXpath().expect.element("*//button[@button='deleteButton']").to.be.visible;
	society.useXpath().click("*//button[@button='deleteButton']").pause(5000);
	society.useXpath().click("*//div[7]//div[3]/button[span[contains(.,'Delete')]]").pause(5000);
	society.useXpath().expect.element("*//span[contains(.,'Society deleted successfully!')]").text.to.match(/Society deleted successfully!/).before(1000);
	society.end();
  }
};
